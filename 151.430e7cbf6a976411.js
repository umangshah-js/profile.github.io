(()=>{let i=0,w=0,M=0,x=null,f=null,u=null,$=!1;const m=t=>x&&(x[t]||x[" "])||[[0]],D=t=>Array.isArray(t.text)||"string"==typeof t.text?t.text:[],F=t=>" "!=t&&":"!=t&&"/"!=t&&"."!=t,W=(t,e)=>{let n=m(t)[0].length*e;return F(t)&&(n+=2),n},j=(t,e)=>{let r=0;for(const n of t)r+=W(n,e);return r},B=t=>null!=t?.colorSlot?t.colorSlot:Array.isArray(t?.text)&&t.text.some(e=>"box"==e||"box_solid"==e)?5:"logo"==t?.type?2:(t?.scaleFactor||1)>=3?1:2==(t?.scaleFactor||1)?2:3,C=t=>({github:22,linkdin:23,email:24,"resume-download":25,flutter:10,redis:11,git:12,spark:13,angular:14,postgres:15,python:16,java:17,javascript:18,docker0:19,docker1:19,docker2:19,docker3:19,docker4:19,linux:20,windows:21}[t]||2),H=(t,e,r,n="  - ",s="    ")=>{const c=t.trim().split(/\s+/).filter(Boolean);if(0==c.length)return[n];const l=[];let a=n,o=a;for(const p of c){const _=o.trim()==a.trim()?`${o}${p}`:`${o} ${p}`;j(_,e)<=r||o.trim()==a.trim()?o=_:(l.push(o),a=s,o=`${a}${p}`)}return l.push(o),l},L=(t,e)=>{const r=[];for(let n=0;n<t.length;n++){const s=t[n];if("string"!=typeof s.text||!/^\s*-\s+/.test(s.text)){r.push(s);continue}let c=s.text.replace(/^\s*-\s+/,"").trim(),l=n+1;for(;l<t.length;){const o=t[l];if("string"!=typeof o.text||o.scaleFactor!=s.scaleFactor)break;const p=o.text.trim();if(""==p||/^\s*-\s+/.test(o.text))break;c+=` ${p}`,l+=1}const a=H(c,s.scaleFactor,e);for(const o of a)r.push({text:o,scaleFactor:s.scaleFactor});n=l-1}return r},N=t=>t.rotate?t._renderSlides[t.curr]:t._renderLines,T=(t,e,r,n,s,c,l)=>{let a=r;for(const o of e){const p=B(o),_=D(o),G=m(_[0]||" "),I=o.scaleFactor*G.length;let h=n;for(const g of _){if(l<(c+=1)/s){h+=m(g)[0].length*o.scaleFactor,F(g)&&(h+=2);continue}const y=m(g),J="logo"==o?.type?C(g):p;for(let d=0;d<y.length;d++)for(let k=0;k<o.scaleFactor;k++){const S=d*o.scaleFactor+a+k;if(!(S<0||S>=w))for(let b=0;b<y[d].length;b++)for(let v=0;v<o.scaleFactor;v++){const A=b*o.scaleFactor+h+v;A<0||A>=i||(t[S*i+A]=y[d][b]?J:0)}}h+=y[0].length*o.scaleFactor,F(g)&&(h+=2)}a+=I}return c},P=()=>{const t={};for(const e in f){const r=f[e];r.rotate&&(t[e]={curr:r.curr,updated:r.updated})}return t};addEventListener("message",({data:t})=>{if("init"==t?.type)return i=t.gridWidth,w=t.gridHeight,M=i*w,x=t.charMap,f=t.content,u=new Uint8Array(M),(()=>{for(const t in f){const e=f[t],r=e.bulletWrapWidth;e.rotate?(e._renderSlides=e.lines.map(n=>null==r?n:L(n,r)),null==e.curr&&(e.curr=0),null==e.updated&&(e.updated=Date.now())):e._renderLines=null==r?e.lines:L(e.lines,r)}})(),$=!0,void postMessage({type:"init-ack"});if(!$||"frame"!=t?.type||!t.buffer)return;const e=new Uint8Array(t.buffer);t.gameon?(t=>{(!u||u.length!=t.length)&&(u=new Uint8Array(t.length)),u.set(t);for(let e=1;e<w-1;e++)for(let r=1;r<i-1;r++){const n=e*i+r;let s=0;s+=t[(e-1)*i+(r-1)]>0?1:0,s+=t[(e-1)*i+r]>0?1:0,s+=t[(e-1)*i+(r+1)]>0?1:0,s+=t[e*i+(r-1)]>0?1:0,s+=t[e*i+(r+1)]>0?1:0,s+=t[(e+1)*i+(r-1)]>0?1:0,s+=t[(e+1)*i+r]>0?1:0,s+=t[(e+1)*i+(r+1)]>0?1:0;const c=t[n]>0;u[n]=c&&s<2||c&&s>3?0:c||3!=s?c?1:0:1}t.set(u)})(e):((t,e)=>{t.fill(0),(t=>{for(const e in f){const r=f[e];r.rotate&&r.updated+r.timeout<=t&&(r.curr=(r.curr+1)%r._renderSlides.length,r.updated=t)}})(Date.now());let n=0;for(const c in f){const l=N(f[c]);for(const a of l)n+="logo"==a.type?1:D(a).length}if(0==n)return;let s=0;for(const c in f){const l=f[c],a=l.padding_top,o=l.padding_left,p=N(l);s=T(t,p,a,o,n,s,e)}})(e,t.loadPr??1),postMessage({type:"frame",buffer:e.buffer,contentState:P()},[e.buffer])})})();